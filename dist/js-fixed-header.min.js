/**
 * Create fixed header in your table.
 * Developed in VanillaJS
 *
 * @param {HTMLElement|string} table - the table element or the table id
 * @param {options} [options] - the custom options
 * @constructor
 * @author Julien Stalder
 * @version 1.3.1
 * {@link https://zendre4.github.io/js-fixed-header}.
 */
var JSFixedHeader=function(e,i){if(this.table=null,this._fixTable=null,this._options=this._getDefaultOptions(),this._scheduledAnimationFrame=!1,void 0!==i&&"object"==typeof i)for(var t in i)i.hasOwnProperty(t)&&void 0!==this._options[t]&&(this._options[t]=i[t]);void 0!==e&&(this.table="object"==typeof e?e:document.getElementById(e),this._createFixHeader())};JSFixedHeader.TYPE_CSS_FIXED="css-fixed",JSFixedHeader.TYPE_JS_FIXED="js-fixed",JSFixedHeader.prototype.table=null,JSFixedHeader.prototype._fixTable=null,JSFixedHeader.prototype._options=null,JSFixedHeader.prototype._equalizeWidthOfFixHeader=function(){if(null!==this._fixTable&&"none"!==this.table.style.display){var e=this.table.tHead.rows.length;this._fixTable.style.width=this.table.clientWidth+"px";for(var i=0;i<e;i++)for(var t=this.table.rows[i].cells.length,o=0;o<t;o++)this._fixTable.rows[i].cells[o].style.width=this.table.rows[i].cells[o].getBoundingClientRect().width+"px"}},JSFixedHeader.prototype._fixPosition=function(){if(null!==this._fixTable&&"none"!==this.table.style.display&&this._isVisible()){var e=document.body.getBoundingClientRect(),i=this.table.getBoundingClientRect(),t=i.left-e.left;if(this._options.type===JSFixedHeader.TYPE_JS_FIXED)this._fixTable.style.left=t+"px";else{var o=window.pageXOffset||document.documentElement.scrollLeft;this._fixTable.style.left=t+-1*o+"px"}}},JSFixedHeader.prototype._showHideFixHeader=function(){null!==this._fixTable&&"none"!==this.table.style.display&&(this._isVisible()&&this.table.getBoundingClientRect().top<this._options.top?(this._equalizeWidthOfFixHeader(),this._fixTable.style.display="table"):this._fixTable.style.display="none")},JSFixedHeader.prototype._createFixHeader=function(){if(null===this._fixTable){var e=this.table.cloneNode(!1);void 0!==this.table.id&&null!=this.table.id&&(e.id=this.table.id+"-fix"),e.style.display="none",e.style.top=this._options.top+"px",e.style.zIndex=this._options.zIndex,""!==e.className?e.className+=" js-fixed-header":e.className="js-fixed-header",e.className+=" js-fixed-header-type-"+this._options.type;var i=this.table.tHead.cloneNode(!0);e.appendChild(i),this._options.type===JSFixedHeader.TYPE_JS_FIXED?document.body.insertBefore(e,document.body.firstChild):this.table.parentNode.insertBefore(e,this.table),this._fixTable=e;var t=this;t._equalizeWidthOfFixHeader(),t._showHideFixHeader(),t._callScroll(),t._fixPosition(),window.addEventListener("resize",function(){t._equalizeWidthOfFixHeader(),t._fixPosition()}),window.addEventListener("scroll",function(){t._showHideFixHeader(),t._callScroll()})}},JSFixedHeader.prototype._callScroll=function(){if(this._options.type===JSFixedHeader.TYPE_JS_FIXED){if(this._isVisible()&&!this._scheduledAnimationFrame){var e=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(e){var i=this;this._scheduledAnimationFrame=!0,e(function(){i._scheduledAnimationFrame=!1;var e=window.pageYOffset||document.documentElement.scrollTop;i._fixTable.style.top=e+i._options.top+"px"})}}}else if(this._isVisible()&&!this._scheduledAnimationFrame){var e=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(e){var i=this;this._scheduledAnimationFrame=!0,e(function(){i._scheduledAnimationFrame=!1,i._fixPosition()})}}},JSFixedHeader.prototype._getDefaultOptions=function(){return{top:0,zIndex:100,type:JSFixedHeader.TYPE_CSS_FIXED}},JSFixedHeader.prototype._isVisible=function(){if(null!==this.table){for(var e=this.table,i=e.offsetTop,t=e.offsetLeft,o=e.offsetWidth,s=e.offsetHeight;e.offsetParent;)e=e.offsetParent,i+=e.offsetTop,t+=e.offsetLeft;return i<window.pageYOffset+window.innerHeight&&t<window.pageXOffset+window.innerWidth&&i+s>window.pageYOffset&&t+o>window.pageXOffset}return!1},JSFixedHeader.prototype.destroy=function(){this._fixTable&&this._fixTable.parentNode.removeChild(this._fixTable)};