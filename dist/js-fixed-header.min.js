/**
 * Create fixed header in your table.
 * Developed in VanillaJS
 *
 * @param {HTMLElement|string} table - the table element or the table id
 * @param {options} [options] - the custom options
 * @constructor
 * @author Julien Stalder
 * @version 1.3.0
 * {@link https://zendre4.github.io/js-fixed-header}.
 */
var JSFixedHeader=function(e,t){if(this.table=null,this._fixTable=null,this._options=this._getDefaultOptions(),this._scheduledAnimationFrame=!1,void 0!==t&&"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&void 0!==this._options[i]&&(this._options[i]=t[i]);void 0!==e&&(this.table="object"==typeof e?e:document.getElementById(e),this._createFixHeader())};JSFixedHeader.TYPE_CSS_FIXED="css-fixed",JSFixedHeader.TYPE_JS_FIXED="js-fixed",JSFixedHeader.prototype.table=null,JSFixedHeader.prototype._fixTable=null,JSFixedHeader.prototype._options=null,JSFixedHeader.prototype._equalizeWidthOfFixHeader=function(){if(null!==this._fixTable&&"none"!==this.table.style.display){var e=this.table.tHead.rows.length;this._options.type===JSFixedHeader.TYPE_JS_FIXED&&(this._fixTable.style.width=this.table.clientWidth+"px");for(var t=0;t<e;t++)for(var i=this.table.rows[t].cells.length,o=0;o<i;o++)this._fixTable.rows[t].cells[o].style.width=this.table.rows[t].cells[o].getBoundingClientRect().width+"px"}},JSFixedHeader.prototype._fixPosition=function(){if(this._options.type===JSFixedHeader.TYPE_JS_FIXED&&null!==this._fixTable&&"none"!==this.table.style.display&&this._isVisible()){var e=document.body.getBoundingClientRect(),t=this.table.getBoundingClientRect(),i=t.left-e.left;this._fixTable.style.left=i+"px"}},JSFixedHeader.prototype._showHideFixHeader=function(){null!==this._fixTable&&"none"!==this.table.style.display&&(this._isVisible()&&this.table.getBoundingClientRect().top<this._options.top?(this._equalizeWidthOfFixHeader(),this._fixTable.style.display="table"):this._fixTable.style.display="none")},JSFixedHeader.prototype._createFixHeader=function(){if(null===this._fixTable){var e=this.table.cloneNode(!1);void 0!==this.table.id&&null!=this.table.id&&(e.id=this.table.id+"-fix"),e.style.display="none",e.style.top=this._options.top+"px",e.style.zIndex=this._options.zIndex,""!==e.className?e.className+=" js-fixed-header":e.className="js-fixed-header",e.className+=" js-fixed-header-type-"+this._options.type;var t=this.table.tHead.cloneNode(!0);e.appendChild(t),this._options.type===JSFixedHeader.TYPE_JS_FIXED?document.body.insertBefore(e,document.body.firstChild):this.table.parentNode.insertBefore(e,this.table),this._fixTable=e;var i=this;i._equalizeWidthOfFixHeader(),i._showHideFixHeader(),i._callScroll(),i._fixPosition(),window.addEventListener("resize",function(){i._equalizeWidthOfFixHeader(),i._fixPosition()}),window.addEventListener("scroll",function(){i._showHideFixHeader(),i._callScroll()})}},JSFixedHeader.prototype._callScroll=function(){if(this._options.type===JSFixedHeader.TYPE_JS_FIXED&&this._isVisible()&&!this._scheduledAnimationFrame){var e=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(e){var t=this;this._scheduledAnimationFrame=!0,e(function(){t._scheduledAnimationFrame=!1;var e=window.pageYOffset||document.documentElement.scrollTop;t._fixTable.style.top=e+t._options.top+"px"})}}},JSFixedHeader.prototype._getDefaultOptions=function(){return{top:0,zIndex:100,type:JSFixedHeader.TYPE_CSS_FIXED}},JSFixedHeader.prototype._isVisible=function(){if(null!==this.table){for(var e=this.table,t=e.offsetTop,i=e.offsetLeft,o=e.offsetWidth,s=e.offsetHeight;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+s>window.pageYOffset&&i+o>window.pageXOffset}return!1},JSFixedHeader.prototype.destroy=function(){this._fixTable&&this._fixTable.parentNode.removeChild(this._fixTable)};